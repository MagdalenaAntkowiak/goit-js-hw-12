{"version":3,"file":"main-9d1fa4b6.js","sources":["../../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst API_KEY = '45147118-3a4bc08e8d7fb4b6ec64761bc';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet query = '';\nlet page = 1;\n\nasync function fetchImages(query, page) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw new Error('Failed to fetch images');\n  }\n}\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('#loader');\nconst input = document.querySelector('input[name=\"query\"]');\nconst loadMoreButton = document.querySelector('#load-more');\nconst loadMoreContainer = document.querySelector('.load-more');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  query = input.value.trim();\n  if (query === '') return;\n  page = 1;\n  gallery.innerHTML = '';\n  input.value = '';\n  loader.style.display = 'block';\n  loadMoreContainer.style.display = 'none';\n\n  fetchAndDisplayImages();\n});\n\nloadMoreButton.addEventListener('click', () => {\n  page += 1;\n  fetchAndDisplayImages();\n});\n\nasync function fetchAndDisplayImages() {\n  try {\n    const data = await fetchImages(query, page);\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n      return;\n    }\n\n    const markup = data.hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n        <li>\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <div class=\"image-info\">\n            <div class=\"info-item\"><span class=\"label\">Likes:</span> ${likes}</div>\n            <div class=\"info-item\"><span class=\"label\">Views:</span> ${views}</div>\n            <div class=\"info-item\"><span class=\"label\">Comments:</span>${comments}</div>\n            <div class=\"info-item\"><span class=\"label\">Downloads:</span>${downloads}</div>\n          </div>\n        </li>\n      `\n      )\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    }).refresh();\n\n    if (page < Math.ceil(data.totalHits / 40)) {\n      loadMoreContainer.style.display = 'block';\n    } else {\n      loadMoreContainer.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n    }\n\n    scrollPage();\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n}\n\nfunction scrollPage() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","query","page","fetchImages","axios","error","form","gallery","loader","input","loadMoreButton","loadMoreContainer","event","fetchAndDisplayImages","data","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","scrollPage","cardHeight"],"mappings":"6vBAMA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAQ,GACRC,EAAO,EAEX,eAAeC,EAAYF,EAAOC,EAAM,CACtC,GAAI,CAYF,OAXiB,MAAME,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,cAAQ,MAAMA,CAAK,EACb,IAAI,MAAM,wBAAwB,CACzC,CACH,CAEA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,qBAAqB,EACpDC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAoB,SAAS,cAAc,YAAY,EAE7DL,EAAK,iBAAiB,SAAUM,GAAS,CACvCA,EAAM,eAAc,EACpBX,EAAQQ,EAAM,MAAM,OAChBR,IAAU,KACdC,EAAO,EACPK,EAAQ,UAAY,GACpBE,EAAM,MAAQ,GACdD,EAAO,MAAM,QAAU,QACvBG,EAAkB,MAAM,QAAU,OAElCE,IACF,CAAC,EAEDH,EAAe,iBAAiB,QAAS,IAAM,CAC7CR,GAAQ,EACRW,GACF,CAAC,EAED,eAAeA,GAAwB,CACrC,GAAI,CACF,MAAMC,EAAO,MAAMX,EAAYF,EAAOC,CAAI,EAG1C,GAFAM,EAAO,MAAM,QAAU,OAEnBM,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,QAClB,CAAO,EACD,MACD,CAED,MAAMC,EAASF,EAAK,KACjB,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc;AAAA;AAAA,qBAEOL,CAAa;AAAA,wBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,uEAGqBC,CAAK;AAAA,uEACLC,CAAK;AAAA,yEACHC,CAAQ;AAAA,0EACPC,CAAS;AAAA;AAAA;AAAA,OAI5E,EACA,KAAK,EAAE,EAEVhB,EAAQ,mBAAmB,YAAaS,CAAM,EAC9C,IAAIQ,EAAe,aAAc,CAC/B,aAAc,MACd,aAAc,GACpB,CAAK,EAAE,QAAO,EAENtB,EAAO,KAAK,KAAKY,EAAK,UAAY,EAAE,EACtCH,EAAkB,MAAM,QAAU,SAElCA,EAAkB,MAAM,QAAU,OAClCI,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,QAClB,CAAO,GAGHU,GACD,OAAQpB,EAAO,CACdG,EAAO,MAAM,QAAU,OACvBO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,QAAQ,MAAMV,CAAK,CACpB,CACH,CAEA,SAASoB,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAY,EAC1BnB,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAKmB,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}